<h3>Private Profile</h3><br>


<!-- ///////////////////////////////// BASIC USER INFO //////////////////////////////////////// -->
<div class="container border border-dark">
  <br>
  <h3>User Info: </h3>

  <table>
    <tbody>
      <tr>
        <th>Username: </th>
        <td>{{user.username}}</td>
      </tr>
      <tr>
        <th>First Name: </th>
        <td>{{user.firstName}}</td>
      </tr>
      <tr>
        <th>Last Name: </th>
        <td>{{user.lastName}}</td>
      </tr>
      <tr>
        <th>Email: </th>
        <td>{{user.email}}</td>
      </tr>
      <tr>
        <th>Phone: </th>
        <td>{{user.phone}}</td>
      </tr>
      <tr>
        <th>Picture: </th>
        <td><img src="{{user.imageUrl}}" width="128px" height="128px"/></td>
      </tr>
      <tr>
        <th>Address</th>
      </tr>
      <tr>
        <td>Street: </td>
        <td>{{user.address.address}}</td>
      </tr>
      <tr>
        <td>Street 2:</td>
        <td>{{user.address.address2}}</td>
      </tr>
      <tr>
        <td>City:</td>
        <td>{{user.address.city}}</td>
      </tr>
      <tr>
        <td>Postal Code: </td>
        <td>{{user.address.postalCode}}</td>
      </tr>
      <tr>
        <td>State: </td>
        <td>{{user.address.stateAbbr}}</td>
      </tr>
    </tbody>
  </table>
  <br>
</div>

<!-- ///////////////////////////////// User Listings Manager Wireframe //////////////////////////////////////// -->

<table class="table table-bordered">
  <thead>
  </thead>
  <tbody>
    <tr>
      <td>Listing 1 Here... (iterate over all listings)</td>
      <td><button>Remove</button></td>
      <td><button>Update</button></td>
    </tr>
  </tbody>
</table>

<!-- ///////////////////////////////// Create a New Listing Route //////////////////////////////////////// -->
<button class="btn btn-success" [routerLink]="['/createListings']">Create New Listing</button><br><br>

<!-- ///////////////////////////////// EXCHANGE CARDS //////////////////////////////////////// -->

<h1>Incoming Requests:</h1>

<div class="container" *ngIf="(sellerExchanges | filterIncomingExchanges).length > 0">
  <div class="row">
    <div class="col container-sm" *ngFor="let exchange of (sellerExchanges | filterIncomingExchanges)">
      <div class="card" style="width: 18rem;" *ngIf="exchange.active && !exchange.complete">
        <div class="card-header">
          <!-- Username -->
          {{exchange.buyer.username}}
          <!-- Exchange Status -->
          -- {{getOutgoingExchangeStatus(exchange)}}
        </div>
        <!-- TODO: Change image url to produce image -->
        <img src="{{exchange.buyer.imageUrl}}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title">Exchange Items</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item" *ngFor="let item of exchange.exchangeItems">{{item.quantity}}x {{item.gardenItem.produce.name}} - {{item.gardenItem.variety}}</li>
          </ul>
          <button class="btn btn-success"(click)="acceptIncomingExchange(exchange)" *ngIf="exchange.active && !exchange.accepted">Accept</button><button class="btn btn-danger" (click)="denyIncomingExchange(exchange)" *ngIf="exchange.active && !exchange.accepted">Deny</button>
          <button class="btn btn-primary" *ngIf="exchange.accepted" (click)="completeExchange(exchange)">Complete</button><button class="btn btn-danger" *ngIf="exchange.accepted" (click)="deactivateExchange(exchange)">X</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container" *ngIf="(sellerExchanges | filterIncomingExchanges).length == 0">
  No Incoming Requests
</div>

<!-- ///////////////////////////////// EXCHANGE REQUEST MANAGER //////////////////////////////////////// -->


<!-- ///// Outgoing Requests ///// -->
  <!-- Parent Container -->
  <div class="container-fluid bg-light px-0"  id="exchangeManager" >
    <h3  id="exchangeManager" >Your Orders: </h3>

    <!-- Button Block Container -->
    <div class="container px-0 gx-0 bg-primary ">
      <div class="row px-0 gx-0 bg-primary text-light py-3 px-0 border border-dark rounded">
        <div class="col">Username</div>
        <div class="col">Date Completed</div>
        <div class="col">Status</div>
      </div>
      <div class="container-fluid" *ngIf="(buyerExchanges | filterBuyerExchanges).length > 0">
        <div class="container-fluid" *ngFor="let exchange of (buyerExchanges | filterBuyerExchanges), let i = index" >
          <div id="exchangeRow" class="row bg-light text-light py-3 px-0 border border-dark rounded" *ngIf="exchange.active">

              <div class="col bg-light text-dark" (click)="isBuyerCollapsed[i] = !isBuyerCollapsed[i]" [attr.aria-expanded]="!isBuyerCollapsed[i]" aria-controls="collapseBasic">{{exchange.exchangeItems[0].gardenItem.user.username}}</div>
              <div class="col bg-light text-dark" (click)="isBuyerCollapsed[i] = !isBuyerCollapsed[i]" [attr.aria-expanded]="!isBuyerCollapsed[i]" aria-controls="collapseBasic">{{exchange.exchangeDate}}</div>
              <!-- Status Column And Review Button Column -->
              <div class="col bg-light text-dark" (click)="isBuyerCollapsed[i] = !isBuyerCollapsed[i]" [attr.aria-expanded]="!isBuyerCollapsed[i]" aria-controls="collapseBasic">
                <div class="row">
                  <div class="col">
                    {{getOutgoingExchangeStatus(exchange)}}
                  </div>
                  <div class="col" *ngIf="exchange.complete && exchange.accepted">
                    <button class="btn btn-dark" (click)="isReviewCollapsed[i] = !isReviewCollapsed[i]" [attr.aria-expanded]="!isReviewCollapsed[i]" aria-controls="collapseBasic">Review</button> |
                    <button class="btn btn-danger" (click)="deactivateExchange(exchange)">X</button>
                  </div>
                </div>
            </div>

            <!-- Review Drop Down -->
            <div id="detailsDiv" class="row bg-warning text-dark" [collapse]="isReviewCollapsed[i]" [isAnimated]="true">
            Review:
              <div class="row">
                <div class="col">* S T A R S * H E R E *</div>
                <div class="col"><input type=text/></div>
                <div class="col"><button>Submit</button></div>
              </div>
            </div>

            <!-- Details Drop Down  -->
            <div id="detailsDiv" class="row bg-light text-dark" [collapse]="isBuyerCollapsed[i]" [isAnimated]="true" >
              <div class="row">
                <div class = "row>">Exchange Items:</div>
                <div class="col">Name:</div>
                <div class="col">Amount:</div>
              </div>
              <div class="row" *ngFor="let item of exchange.exchangeItems">
                <div class="col">{{item.gardenItem.produce.name}}</div>
                <div class="col">{{item.quantity}}</div>
              </div>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid" *ngIf="(buyerExchanges | filterBuyerExchanges).length == 0">
      No Active Orders...
    </div>
  </div>
</div>


<!-- /////////////////////// B U T T O N S //////////////////////////////// -->
<button>Exchange History</button>
<button (click)="getUser(user.username)">Public Profile</button>

<!-- ///////////////////////////////// ACCORDIAN TEST //////////////////////////////////////// -->





